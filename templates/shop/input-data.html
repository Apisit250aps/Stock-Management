{% extends "base.html" %}
<!-- block -->
{% block content %}
<!-- content here! -->
<!-- content here -->
<div class="card">
    <h5 class="card-header">Shops</h5>
    <div class="table-responsive  text-nowrap">
        <table class="table table-hover table-borderless">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Invoice No.</th>
                    <th>Product Code</th>
                    <th>Product Name</th>
                    <th>Product Cost</th>
                    <th>Product Price</th>
                    <th>Product Unit</th>
                    <th>Product Value</th>
                    <th>Add Date</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="(item, index) in input_data" :key="index">
                    <td><i class="fab fa-angular fa-lg text-danger me-3"></i> <strong>[{index+1}]</strong></td>
                    <td>
                        <strong>[{item.invoice_no}]</strong>
                    </td>
                    <td class="">
                        [{item.product.product_code}]
                    </td>
                    <td>[{item.product.product_name}]</td>
                    <td class="num">[{item.product.product_cost}]</td>
                    <td class="num">[{item.product.product_price}]</td>
                    <td class="num">[{item.product.product_unit}]</td>
                    <td class="num">[{item.product.product_price*item.product.product_unit}]</td>
                    <td class="time">[{ item.product.add_date }]</td>
                    <td>
                        <div class="dropdown">
                            <button type="button" class="btn p-0 dropdown-toggle hide-arrow" data-bs-toggle="dropdown">
                                <i class="bx bx-dots-vertical-rounded"></i>
                            </button>
                            <div class="dropdown-menu">
                                <a class="dropdown-item" href="javascript:void(0);"><i class="bx bx-edit-alt me-1"></i>
                                    Edit</a>
                                <a class="dropdown-item" href="javascript:void(0);"><i class="bx bx-trash me-1"></i>
                                    Delete</a>
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
{% endblock content %}
<!-- scripts -->
{% block script %}
<!-- script here -->
<script>
    const { createApp, computed } = Vue;

    createApp(
        {
            delimiters: ["[{", "}]"],
            data() {
                return {
                    page: "shop",
                    type: "input-data",
                    input_invoice: null,
                    input_data: null,

                };
            },
            mounted() {
                axios(
                    {
                        method: "get",
                        url: "{% url 'get-invoice-shop' %}"
                    }
                )
                    .then((response) => {
                        if (response.data['status']) {
                            this.input_invoice = response.data['data'];
                        }
                        this.input_data = computed(() => {
                            let data = [];
                            for (let item of this.input_invoice) {
                                for (i of item['data_input']){

                                    data.push(i)
                                }
                            }
                            return data;
                        });

                    }).catch((err) => {

                    });
            }
        }
    ).mount("#app")
</script>
{% endblock script %}